---
title: 准备领域接口
date: 2021-05-24T16:33:00
---

# 准备领域接口

在前一章节中，设计好实体后，就可以着手准备数据的存取接口了。

在该演示场景中，为了便于快速演示，只简单创建一个新增网点信息，以及一个简单的演示用的详情查询接口。

## 新建Flycode接口

1. 在主导航切换到 **领域** 模块
2. 选择或创建一个接口所属的 **目录**
3. 选择或创建一个接口所属的 **领域**
4. 点击 **添加** 按钮
5. 选择 **flycode接口** ，即可以进入接口编辑页面

![](http://apaas.wxchina.com:8881/wp-content/uploads/%E5%88%9B%E5%BB%BA%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3.jpg)

## 设置新增接口基本属性

1. 首先切换到 **行为信息** 页面，进行基本的信息设置
2. 填写 **行为名称** ，方便好记的就行
3. 选择 **操作类型**，因为是新增接口，选择 **数据提交** 类型即可
4. 接下来就可以切换到 **flycode代码** 页面，进行接口编写了。

![](http://apaas.wxchina.com:8881/wp-content/uploads/%E8%AE%BE%E7%BD%AE%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3%E5%B1%9E%E6%80%A7.jpg)

## 新增接口入参设置

首要要设置接口参数，因为是新增数据的接口，因此需要把新增时的 **入参** 确定好，出参可以不设置。

1. 确认右边的参数列表处在 **输入** 页签
2. 点击 **添加** 按钮
3. 在弹出菜单中选择 **从实体中选择** ，就可以看到输入设置页面
4. 在列表中搜索上一章中新建的实体名称
5. 在实体列表中选择该实体，就可以加入到添加栏中
6. 点击确定后，就可以将选中的实体加入到参数列表中了。本示例中只需要添加一个实体即可
7. 因为是单个数据的保存，因此确保参数实体类型为 **单实体**
8. 选中实体中需要传递给接口的具体属性，在本例中，**id** 会自动生成，其余三个属性需要传递给接口，因此勾选这三个属性。
9. 点击 **保存** 后，入参设置就完成了

![](http://apaas.wxchina.com:8881/wp-content/uploads/%E8%AE%BE%E7%BD%AE%E6%8E%A5%E5%85%A5%E5%85%A5%E5%8F%82.jpg)

## 新增接口编写

1. 此处就是上一步设置好的入参信息

2. 输入保存数据的代码，关于flycode可查看具体的编码教程，本示例中只需要复制以下代码即可：

   ```js
   // 生成数据id
   IN.test_sales_station.id = FLY.genId();
   // 保存数据
   DB.save(IN.test_sales_station);
   ```
3. 点击 **保存** 按钮，就完成了新增接口了。

![](http://apaas.wxchina.com:8881/wp-content/uploads/%E7%BC%96%E5%86%99%E6%8E%A5%E5%8F%A3%E4%BB%A3%E7%A0%81.jpg)

## 添加详情查询接口

用同样的方法新增一个详情查询的接口，不同之处在于以下几点：

> 该接口只是查询一条已经填写的数据出来，用于演示，并没有实际的的作用。在实际应用中，通常需要从一个数据列表进入单条数据的详情查看，此处为了简化，就没有创建数据列表。

1. 行为名称可以设置为 **查询网点信息** ，而操作类型不同需要设置为 **单个查询**

2. 由于是查询接口，因此要设置是不再是入参，而是 **出参** ，其设置过程与入参设置一样，相当于一个互逆的操作。

3. 查询的代码也不同，这里只简单的查询一条数据出来。

   ```js
   var results = SELECT * FROM test_sales_station;
   if (results.length > 0) {
       OUT.test_sales_station = results[0];
   }
   ```

![](http://apaas.wxchina.com:8881/wp-content/uploads/%E5%88%9B%E5%BB%BA%E8%AF%A6%E6%83%85%E6%9F%A5%E8%AF%A2%E6%8E%A5%E5%8F%A3.jpg)