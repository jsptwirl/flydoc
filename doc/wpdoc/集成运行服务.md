---
title: 集成运行服务
date: 2022-05-03T12:53:48
---

## ipaas-flystep-serv

||||||
|---|---|---|---|---|
|历史版本|发布时间|部署该版本环境|下载路径|服务说明|
|v3.3.0|2023.9.1|https://xwsvn.wxchina.com/doc1/iPaaS/V3.3/5.发布阶段/程序包/ipaas-flystep-serv.zip(1457)|新功能添加404具体的error\_uri支持oracle用sid方式登录添加不输出日志的适配器httpclient日志打印将sout换成slf4jtomcat监控指标Flystep任务完成异步通过Router@10827添加详细的耗时日志Router异步Servlet改造@10826initial 3.3删除无效锁失效连接标记支持不安全的https和默认http1.1的keepalive超时删除无效代码优化部分代码增加调用耗时更新yml添加路径修复缺陷集成流调试优化】对集成流调试后，查看触发节点为http的连接器节点日志，调用时间格式不对@40063增加http自动跟随重定向修复请求头空指针的问题修复类型转换问题节点运行增加消息ack修复潜在的线程风险oracle连接配置兼容API调用日志查询时会出现一条数据两个状态被当作了两条数据#40431修复测试用例新增时没有数目限制的问题yml更新调度参数优化|
|v3.2.1|2023.8.8|https://xwsvn.wxchina.com/doc1/iPaaS/V3.2/5.发布阶段/程序包/ipaas-flystep-serv.zip(1387)|修复缺陷增加http自动跟随重定向修复请求头空指针的问题修复类型转换问题|
|v3.2.0|2023.6.27|https://xwsvn.wxchina.com/doc1/iPaaS/V3.2/5.发布阶段/程序包/ipaas-flystep-serv.zip(1293)|新功能添加根据动态id获取日志接口API调用日志记录错误信息日志接口增加集成流运行版本日志接口添加id参数校验集成流参数API调用增加应用租户代码集成流日志添加API信息添加集成流调用校验参数完善应用API应用API增加API限流增加API批量接口增加API管理接口增加open\_api表，调整限流表添加集成流插件必填参数校验集成流记录API日志信息调整删除应用逻辑API调用替换租户代码API批量保存接口url不拼接租户代码API接口返回数据增加租户代码应用列表返回创建信息应用API列表返回API状态API接口返回数据增加字段返回ip白名单API详情增加input接口返回API调用次数选择API返回所有列表API详情增加input清除api限流缓存调整API限流完善应用管理接口应用管理接口修复缺陷调整api日志记录逻辑修改list参数校验逻辑api日志返回集成流名称api列表返回id信息集成流日志增加系统版本#34328修复运行耗时为负数的问题回滚修改对执行脚本节点超时处理批量新增API默认启用连接设置下拉列表过滤删除版本的连接#37568连接设置下拉列表过滤失效的连接#37568日志列表显示记录的名称新增API默认启用回滚修改#37433修改查询接口报错问题#37433修改api限制值#37399api列表查询条件去除分组#37366sql问题api限制值改为十亿集成流列表按照分组排序#37019分组列表按seq排序修复api查询问题api分配列表按照添加时间正序调整api部分接口#36892 #37097 #37131 #37133调整api列表接口修复apicaseid查找多个问题修复json转换问题修复保存ip空白名单问题保存Ip白名单api列表返回id新增应用默认启用修复上传插件问题修改api更新应用信息|
|v3.1.0|2023.5.12|https://xwsvn.wxchina.com/doc1/iPaaS/V3.1/5.发布阶段/程序包/ipaas-flystep-serv.zip(1102)|新功能调整条件选择逻辑调整条件分支逻辑，支持v3.1协议修改接口拦截器相关代码循环节点校验循环参数调整API限流调整跳出循环逻辑)unfinished)将HTTP节点入参url放到状态机解析抽象解析器到插件sdk中，插件也可以使用状态机的脚本解析器去掉脚本插件，直接通过状态机运行脚本指定循环次数及设定表达式为中止循环条件转化js返回的数组或对象新增数组以及对象函数增加表日期拓展方法增加表达式数字、字符串拓展方法JS引擎支持扩展方法表达式增加JS解析引擎支持给数据转化-修改插件，输入数据进行转化增加数据库事物状态机修改默认控件类型修改发布集成流对循环节点判断增加函数列表查询接口查询连接设置返回是否静态模板字段修复缺陷集成流日志增加系统版本#34328晚上toBool()方法#33440修复js函数的各种问题#33838 #32900 #33833 #33834 #33835 33940修复kafka消息接收问题修复类型转换问题修复对象中布尔类型无法转换的问题插件支持脚本解析器调整归还连接时的日志兼容Object转map修复入参解析null值的问题修复入参解析的问题jackson兼容jdk8日志格式调整变量名修复自定义函数的问题#32900 #35830 #35831取消转义修复ConcurrentMap空指针的问题#34005修复循环0次运行的问题#33555toRMB()支持4位小数#33203增加循环中断状态#33574修复脚本执行错误时显示行数的问题调整条件比对问题#33209调整toRMB()函数异常提示#33200修复循环中止的问题修复power函数的问题#32954index表示循环次数修复itemspath为空的空指针问题修复空指针等号判断增加布尔值类型修复节点试运行的问题修复节点运行bug修复js对象转java对象导致递归栈溢出的问题#31207调整js解析引擎修复更改连接设置http连接器URL不变的问题#29506修复脚本解析排序问题js脚本引擎 去除double后面的0合并19a5469ff3efc2c64ff36bc92b63fe18389588b7代码新增循环时索引列表修复配置文件，增加oracle字符集包修复脚本模板在循环中被修改的问题修复嵌套循环清空缓存的问题调整迭代器运行空循环执行，直接跳到下一个节点update调整测试节点运行返回格式调整消息队列名修改定时任务逻辑#35823修改下载资源URL参数应用分组无论删除与否，seq都会在最大值上加一35479修复日志查询，sls分词符的问题#33622导入导出需求更改9032导入导出需求更改给枚举组增加排序保存时删除不存在的数据调整提示语#2387调整提示语@2689修复拼写错误分组更新返回分组id修复statemachine默认是task的问题调整提示语#2387 #2689数据转换枚举类空值错误枚举值保存，没有添加platstatus条件29987连接账号降序排列29987枚举分组默认值赋值更改29804连接列表按更新时间倒序排序#29478枚举分组删除修改集成流测试日志错误连接修改的枚举实现表被删除后增加异常提示#2689覆盖版本时继承前端配置增加定时任务日志调整定时任务逻辑删除无用代码导入导出修改修复导出的问题修复定时任务测试运行的问题枚举的值的创建修复插件参数为多层List的问题集成流导入导出|
|v3.0.1|2023.6.20|https://xwsvn.wxchina.com/doc1/iPaaS/V3.0/5.发布阶段/程序包/ipaas-flystep-serv.zip(1275)|修复缺陷调整测试节点运行返回格式修复脚本模板在循环中被修改的问题调整迭代器运行空循环执行，直接跳到下一个节点修复嵌套循环清空缓存的问题增加oracle字符集包删除无用代码导入导出修改修复导出的问题修复定时任务测试运行的问题|
|v3.0.0|2023.1.16|https://xwsvn.wxchina.com/doc1/iPaaS/V3.0/5.发布阶段/程序包/ipaas-flystep-serv.zip(858)|由于iPaaS平台v3.0不向前兼容，因此新项目使用ipaas，建议直接上v3.0。新功能兼容v3.0表增加v3.0表修改保存连接器接口增加保存连接器接口华为obs上传下载调整新版SPI下载文件返回流表达式解析优化将uid生成器整合到插件中调整kafka消费者配置方法返回CloseableHttpResponse,用完调用close()增加属性注解增加新版SPI支持更多请求体格式插件运行增加版本增加MQ生产者处理器增加行为配置继承，运行时增加默认版本增加v3.0协议升级接口运行时上下文传入db/script插件中文本框表达式改用js账号类型增加临时表支持自定义异常增加根据列表查询行为的接口调整删除逻辑调整删除行为逻辑调整启用停用逻辑连接设置可以为空调整行为删除逻辑增加修改连接器基本信息接口查询版本返回发布状态增加资源预览增加连接器分类接口兼容3.0表查询版本增加发布信息增加集成流发布时间3.0版本查询删除版本接口增加apaas接口调整连接器保存逻辑修改连接器版本信息递归生成输入输出更新版本状态接口apaas接口入参模板增加类型连接账号列表增加修改行为分组接口调整上传接口插件入参增加3.0版本校验接口增加3.0插件上传接口查询行为返回连接器信息返回字符串类型完善连接器行为列表连接设置与连接器版本关联保存连接器行为行为列表支持按名称搜索连接器内部连接设置接口停用对应连接器版本行为更新连接器版本状态查询连接器版本信息列表根据资源id下载文件集成应用的增加，修改，删除删除连接器增加判断查询应用连接器分类列表新建应用连接器默认添加分类连接器列表支持多种类型查询集成流添加groupid,支持查改集成流新增根据时间段查询根据分类查询应用连接器导入批量添加定时任务修复缺陷修复kafka账号的问题统一连接器发布时生效日志重试功能添加日志列表返回增加retrystatus返回日志详情增加字段apicasename修复打包问题重试功能添加2重试功能添加huawei云obs修改修复plugin-sdk依赖问题添加日志入参搜索过滤$jacocoData支持自定义异常修复map转对象问题修复null被忽略的问题修复循环里拿不到全局参数的问题修复脚本执行失败的问题修复节点超时时间为空的问题调整全局参数逻辑，支持根据配置的类型强转超时时间不能小于5秒#3136日志重试修改日志重试标志删除多余包修复http日志多次保存的问题#2995修复缓存keyhttp附件参数和数据赋值先后的问题修改表达式null处理修复http节点测试运行异常#2995修复异常捕获bug#2995去掉“主题”Map入参不能转为String#24138修复System.token类型转换问题修复username.token传不到插件里的问题注释掉插件熔断merge集成流导入导出集成流查询修改导入修改增加版本号格式校验修复字段必填没显示的问题修复版本顺序问题修改集成流修改集成流id字段查询增加集成流id字段查询修复集成流无法启用的问题删除连接器时不校验集成流引用#3173集成流导入修改更新连接器时清除行为缓存修复更新账号没清除缓存的问题保存增加行为状态检查更新连接器不清除触发行为#3173集成流导入修改以及copy的字段添加保存集成流时不保存描述3135连接器导出修改查询行为带上连接器信息版本列表返回字符串类型新增版本未启用连接器导入调整版本发布状态字段放到版本表3173连接器发布状态修改应用导入连接器、版本、行为、临时行为、账号类型改为逻辑删除#3142去除发布时多余入参修改发布时不启用集成流#3135应用分组修改调整异常顺序节点运行增加version入参连接列表只选择状态为1的连接配置过滤无连接配置连接器版本连接账号详情bug修复下拉数据没继承的问题#3173增加查询所有版本账号的接口#3303删除主题校验集成流应用total字段删除集成流应用求和集成流导出导出修改，集成流应用删除调整集成流发布需要前端传协议#3135调整触发器过滤逻辑#3033调整基准版本继承逻辑#3173删除数据，不然再次插入会主键冲突连接器增加重名校验#3142修复账号问题账号名称重复判断多种操作同时更新连接器信息集成流导出，对集成流分组赋一个默认值日志运行时间修改和名称重复判断的修改集成流关系表保存版本号停用删除版本修改账号状态日志运行时间修改修复空指针问题集成流更改应用分组修改更新状态逻辑修复连接器版本问题#3173修复状态问题#3173导出连接账号复制的修改连接账号增加版本以及适配器的更新标志的更新连接和账号配置的匹配versionList接口功能添加调整入参解析调整接口字段调整插件解析逻辑detail接口错误修改合并连接器未启用和停用增加从基准版本拿触发器调整基准版本比对逻辑日志列表返回增加retrystatus字段发布自动启用版本和行为增加连接器停用逻辑调整状态逻辑增加文件上传类型校验过滤掉没有连接的集成流修改覆盖bug修复异常列表接口导入的修改去除使用openjdk没有的依赖修改连接器删除逻辑BUG修改修复保存连接设置问题修复覆盖bug删除旧的账号类型和账号表删除旧行为表，连接器表adaptertgroup改为categoryid保存后返回连接器id更新版本时继承发布人发布时间accounttypeid改为accounttypeupdategroup名称重复的修改修复版本查询调整版本排序集成流配置页面查询连接器改造/api/admin/apiCase/saveName该接口需要新增说明字段，以修改集成流说明修改集成流信息增加descr字段修复发布问题修复精度丢失问题行为增加版本号增加行为版本号行为以id+版本作为主键帮前端兼容启用连接器启用行为修复没有创建临时文件夹的问题id转字符串id返回字符串误提交修复分组统计问题连接器list添加一个过滤的内容连接器list改回去连接器list修改集成流分组输入参数修改修改入参校验导入导出的修改删除连接器改为新表增加连接器类型入参settingid字符型转为数值型日志信息增加集成流名称调整上传逻辑删除修改apater列表修改提示信息修改账号分组的修改修复参数buggroupid错误添加groupid添加账号list修改账号保存接口的修改日志错误修改修复字段bugaccount详情修改account列表修改适配器列表版本修改格式修改huawei的obs上传修改修复查询行为返回null问题删除必填校验去掉版本校验接口adapterid为空判断修复apaas接口入参模板问题huawei字段被写死，进行修改连接器分组查询账号修改，增加返回的字段允许跨域修改增加校验逻辑账号修改，不能修改所属的连接器连接账号列表名称修改以及其他取消源码依赖回退被误删的代码admin增加plugin依赖修复依赖包被误删的问题华为云obs上传，下载修复参数错误集成流应用分组的数值更新修复apaas接口#3172apaas接口增加url日志接口添加入参搜索集成分组中集成流的数量执行时间的修改调整mq类型判断改为逻辑删除updateGroupList名称修改在add中添加groupid的total数加一的功能在copy中增加了选择分组的功能删除add中，让应用分组total+1的功能集成流分组修改修复total+1的问题修复merge的问题异常的修改点击“发布”不会报错为null#25016修复集成流迁移接口bug更新sql语句临界情况输出第一条有效数据#24671jobname是number类型校验定时任务入参可以处理一个集成流下多条cron表达式最近运行时间实际次数少于指定次数的情况#24521变更定时任务需求:最近运行时间、指定时间的补偿设置groupid默认为0设置groupid默认为空可以解析带"#24111指定时间晚于当前时间不会再报错#24053定时任务开始时间结束时间可为空#23938去除无效代码|
|v2.2.0|2022.9.29|https://xwsvn.wxchina.com/doc1/iPaaS/V2.2/5.发布阶段/程序包/ipaas-flystep-serv.zip(445)|新功能增加类型json序列化忽略不识别的类型所有查询忽略大小写修改枚举类存储过程支持oracle添加remoteaddr存储过程支持mysql增加存储过程查询增加sqlserver驱动依赖支持节点试运行升级版本到v2.2新增类型新上下文销毁的时候关闭连接注入name和token添加debug信息支持http节点测试运行增加token、username系统变量增加全局变量赋值行为增加全局变量节点试运行支持系统变量增加字符串标识增加脚本类型字段增加系统变量修改dockerfile限制导出集成流的发布状态导入集成流添加调度信息quartz创建连接器默认为3 应用连接器增加异常状态码增加actiontype修复缺陷修复pg多主键问题#2685修复pg查不到无参存储过程的问题#2808修复存储过程不指定model时为空的问题#2808修改枚举类,能够返回"不存在"#22530修复全局变量赋值map的问题#2798修改opname为空的BUG修复jackson不兼容jdk8 localdatetime的问题精确获取remoteip设置quota默认值去掉无用的类型转换修复空指针异常调整节点测试入参修复角色列表排序不对的问题优化异常提示#2798修复插件异常时没有输出参数的问题#2685优化全局参数异常提示#2798修复循环中第一个节点报错导致下标越界的问题修复超时时间空指针实现参数赋值支持json转map/list#2798修复条件分支路径问题修复节点output修复节点试运行系统参数username为null的问题修复debug运行无法解析beetl套嵌方法的问题修复公有集成流找不到帐号的问题修复json中boolean、number为空的问题写同步结果节点全局日志修复全局变量没有记日志的问题修复定时任务触发没有初始化全局参数的问题修复脚本在循环中被转义两次的问题修复嵌套循环bug增加脚本前置处理器调整表达式解析修复结果保存时间没生效的bug修复导入到不同租户版本重复问题修复定时器点击发布会立即执行1次#23316修复导入发布集成流显示未发布问题导入集成流将协议同步导入定时器点击发布会立即执行1次，未做修改#23316导入集成流有修改显示"有更新待发布"修复更新后没有提示“有更新待发布”的问题修复发布立即执行定时任务的问题兼容oracle大小写敏感默认返回全部数据表修复导入已存在集成流报错问题修复oracle查不到无参存储过程的问题#2808修复节点日志输入输出超长显示不全的问题修复查询数据库表异常的问题#2685修复查不到日志的问题定时任务运行增加操作人入参调整存储过程列表响应格式调整节点测试运行输出结构调整节点测试出参admin服务增加角色权限判断|
|v2.1.0|2022.7.15|https://xwsvn.wxchina.com/doc1/iPaaS/V2.1/5.发布阶段/程序包/ipaas-flystep-serv.zip(260)|新功能把dynamicid传给插件优化debug日志SLS日志增加环境id默认管理员写结果支持展开数据适配蒙牛AI接口增加mock登录接口增加响应码调整集成流响应结构日志支持嵌套循环debug调用集成流 + 调整异常结果返回调整日志重试策略增加一些日志重试策略debug日志增加循环次数标识支持集成流公用增加测试调用日志增加测试用例复制接口测试用例增删改查接口节点日志增加数据集成流日志优化，支持节点运行日志单独查看增加日志节点定位增加数据库字段类型映射agent增加上下文和插件特权级agent增加上下文http默认编码utp-8增加一些方法增加数据库类型连接的校验增加json转义优化增加几个方法调整异常信息添加泛型调整异常类型重载一些方法增加插件单例/多例模式支持优化脚本解析时异常的响应信息重复消息return空判断调整Redis上下文到本地内存增加日志信息调整测试运行日志测试运行的结果放在缓存，不上传SLS增加一些节点日志DockFile增加字体ttf-dejavu扩大采集debug日志范围触发节点日志增加编排结果增加choice选择路径下标和异常catch路径下标日志触发节点日志增加集成流总体运行数据集成流日志foreach节点增加循环次数增加状态返回debug日志支持配置显示条数debug增加运行时协议校验增加定时任务测试调用增加定时任务触发间隔限制查看日志详情，增加重试新增修改集成流名称接口copy集成流时修改协议里的名称禁止导出公用编排增加根据版本查询集成流协议的接口增加复制集成流接口集成流迁移适配业务token增加集成流迁移功能修复缺陷修复脚本、写结果无法定位循环下标的问题，支持空循环运行#2093修复字符串json解析失败的问题调整异常响应状态去掉默认转义增加json转义调整异常返回修复日志列表出现两条一样日志的问题修复运行时日志列表查询升级fastjson版本，排除传递抵赖升级fastjson版本增加SLS重试次数修复日志文件删除循环内的input和output去掉json转义兼容application/x-www-form-urlencoded修复循环没有展示迭代数据的问题修复中文也被转义的问题修复多层嵌套数组下标的问题条件选择的输出调整为分支名称+路径下标#2317修复蒙牛适配器的问题条件选择的输出调整为分支名称#2317修复http没有解析header的问题#2094修复保存集成流后无法debug运行的bug#2316调整返回状态码修复拿不到异常返回的问题requester入参json特殊处理更新账号缓存key插件异常抛出循环清空内部节点缓存修复日志问题打印异常堆栈修改字段替换修复写结果日志没保存的问题增加异常捕获路由日志节点路由时清空异常缓存调整foreach异常处理choice填充写回next修改日志配置bug小调整复制集成流默认改为未启用修复定时任务发布早于数据提交的问题#2317修复日志超过100条显示不全的bug#2317修复行为不存在的问题修复账号查询漏带租户代码修复测试运行定时器的bug#2316增加cron表达式空指针判断定时任务调用类型调整修复行为查询多条的bug修复日志字段错误调整上传资源包逻辑集成流列表接口调整迁移集成流bug修复|
|v2.0|2022.5.3|https://xwsvn.wxchina.com/doc1/iPaaS/V2.0/5.发布阶段/程序包/ipaas-flystep-serv.zip(111)|新功能编排调用方式默认正常调用增加调用类型操作日志、调用日志直接上传到sls添加ignore分布式id定时任务打trace日志增加查询debug日志接口MQ提取到公用限流一波SLS日志写入改为Aliyun LOG Java Producer记录操作日志集成流日志增加DB支持新增SLS日志集成新增编辑权限判断@1592k8s探针获取async参数修改DB配置DB兼容syncresult同步取结果scheduler集成，待管理服务集成esb兼容httpsdynamicid改成stringnetty\[http/tcp协议\]添加quartz增加熔断异常状态码增加http requester支持增加http listener支持修改异常statemachine使用百度IDDockerfile声明外挂目录添加监控补全错误信息添加router配置手动commit后置节点执行增加熔断节点执行增加超时熔断策略内存探测修改dockerfile修改makefile修改参数容器化支持写结果问题redis key添加prefix添加oshi统一版本号幂等nacos服务注册动态可插拔插件输出小修改动态配置添加同步参数兼容choice和schedulerretry,catchidentity和trace 解析协议消息适配插件的errorCode状态机增加retry,catch添加版本2.02.0 pomES 日志适配补全OSS工具es日志1依赖匹配更改pom更改配置集成流导入导出修改@1977集成流列表接口修改@1977集成流导入导出修改添加misfire策略账号类型列表查询新增描述字段增加编排专业的连接器列表查询接口定时任务触发器增加串行支持应用账号管理修改#3599scheduler任务添加job添加资源版本添加调度表dynamicid改为string修复缺陷添加misfire策略修复SLS日志查询时间问题#1615修改错别字#1593优化token异常捕获日志名称歧义MQ广播自动生成队列名插件上传时清空运行时服务中的连接缓存操作时间、操作人自动填充修复上传OSS日志问题增加空对象和空数组的占位符优化SLS查询方式跨域放到nginx处理日志列表报错调整权限判断#1594同步结果修复文件上传大小限制的BUG#1595去掉一些参数字段修改接口入参去掉plugin-core一些字段关闭内存校验修改重试问题修改系统组件的返回add 租户过滤#1977修改fail展示信息异常友好化处理fail节点同步参数修改修复choices选择器问题RPC失败回调状态处理RPC失败回调消息选择状态{}值保持原样增加sls日志值为{}时保持原样设置线程名内存不足时直接返回错误增加插件最终日志调用插件添加租户id缓存也可作为同步结果输出修复日志推送流关闭后rabbitmq依然消费的问题增加日志查询sls空指针问题调整运行中状态也写日志文件修改队列名修复编辑行为没有报错资源版本号的bug#1603修复导入导出问题#1977解析集成流兼容choice和foreach#1615启动集成流时刷新定时任务修改帐号后通知运行时服务清缓存小修改调整异常列表修复定时器同步异步无法切换#1615优化提示语#1615启用行为同步启用集成流#1603禁止导出未发布的编排#1977修复导入导出集成流数据重复的问题修复编排发布问题修复编排调用状态修改dockerfile启用启程流发布定时任务行为主题连接器唯一判断#1603修复分布式锁和@Transactional一起使用锁失效问题修复集成流列表bug更新时间#1600增加重名判断#1603修复日志BUG优化连接器停用逻辑#1600增加权限判断#1594优化资源包上传校验顺序修复编排发布异常时数据没回滚的问题连接器重名校验由租户改为全局#1601调整SLS日志查询语句修复资源包上传BUG#1595修改资源校验提示语#1595修复资源列表缺少资源的bug#1595增加资源包上传参数配置和uri校验#1595修复连接器和资源的相关BUG#1600 #1595 1602增加资源包名称重复校验#1595修复行为列表管理不上资源的bug#1602启用停用状态码改为200#1600删除资源增加公用私用判断#1595资源包覆盖增加校验#1595/api/admin/resource/list增加账号类型名称返回#1603增加行为停用校验#1603连接器列表增加shared入参#1603修复启用行为BUG#1603连接器列表过滤逻辑组件#1600修复默认授权的bug#1600行为详情接口增加账号类型名称字段#1603上传资源包时校验resourcekey是否唯一#1595新增行为状态默认改为待启用#1603行为列表返回值增加资源名称#1600修复资源列表没有过滤租户私用的BUG#1601修复修改行为的时候没有更新连接器更新时间的BUG#1600优化连接器管理:停用，逻辑定义#1600连接器列表增加共用/私用查询#1600增加连接器名称/主题重复校验#1601修复查询权限BUG@1600 @1601|